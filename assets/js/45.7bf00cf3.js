(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{394:function(e,a,t){"use strict";t.r(a);var r=t(32),s=Object(r.a)({},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"kernelcare-eportal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kernelcare-eportal","aria-hidden":"true"}},[e._v("#")]),e._v(" KernelCare.ePortal")]),e._v(" "),t("p",[e._v("KernelCare.ePortalはインターネットにアクセスできない、ファイアウォールの内側にあるサーバのためのKernelCare用のWebベース管理コンソールです。これはKernelCare Enterprise製品の一部であり、オンプレミスにインストールする必要があります。")]),e._v(" "),t("h2",{attrs:{id:"eportalのハードウェア要件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#eportalのハードウェア要件","aria-hidden":"true"}},[e._v("#")]),e._v(" ePortalのハードウェア要件")]),e._v(" "),t("p",[e._v("ePortalマシンのディスクサイズは接続されているサーバの数によって変わりません。")]),e._v(" "),t("p",[e._v("要件は常に同じです。:")]),e._v(" "),t("ul",[t("li",[e._v("100 GB 以上")]),e._v(" "),t("li",[e._v("200 GB 推奨")]),e._v(" "),t("li",[e._v("SSD")])]),e._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[e._v("注記")]),t("p",[e._v("SSDは非常に重要な要件です。")])]),t("p",[e._v("その他の要件に関しては、以下の構成と以下の数の接続サーバにおいてテスト済みです。:")]),e._v(" "),t("ul",[t("li",[e._v("次の要件の場合、接続マシンの最大数は10,000台です。:\n"),t("ul",[t("li",[e._v("VM")]),e._v(" "),t("li",[e._v("1 VCPU")]),e._v(" "),t("li",[e._v("1 GB RAM")])])]),e._v(" "),t("li",[e._v("次の要件の場合、接続マシンの最大数は75,000台です。:\n"),t("ul",[t("li",[e._v("Core i5")]),e._v(" "),t("li",[e._v("1 CPU")]),e._v(" "),t("li",[e._v("4 GB RAM")])])])]),e._v(" "),t("h2",{attrs:{id:"インストール"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#インストール","aria-hidden":"true"}},[e._v("#")]),e._v(" インストール")]),e._v(" "),t("h3",{attrs:{id:"el7上のkernelcare-eportal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#el7上のkernelcare-eportal","aria-hidden":"true"}},[e._v("#")]),e._v(" EL7上のKernelCare.ePortal")]),e._v(" "),t("p",[e._v("KernelCare.ePortalをインストールするには、EL7の最小イメージから始めてください。")]),e._v(" "),t("p",[e._v("e-portalのインストールと作業性のために、nginx Webサーバが必要となってきます。オフィシャルnginxリポジトリからの安定版を使用することをお勧めします。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ cat > /etc/yum.repos.d/nginx.repo <<EOL\n[nginx]\nname=nginx repo\nbaseurl=https://nginx.org/packages/centos/7/\\$basearch/\ngpgcheck=0\nenabled=1\nEOL\n")])])]),t("p",[e._v("詳細は "),t("a",{attrs:{href:"https://nginx.org/en/linux_packages.html#stable",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://nginx.org/en/linux_packages.html#stable"),t("OutboundLink")],1),e._v(" をご覧ください。")]),e._v(" "),t("p",[e._v("KernelCare.ePortalリポジトリを設定します。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ cat > /etc/yum.repos.d/kcare-eportal.repo <<EOL\n[kcare-eportal]\nname=KernelCare ePortal\nbaseurl=https://repo.eportal.kernelcare.com/x86_64.el7/\nenabled=1\ngpgkey=https://repo.cloudlinux.com/kernelcare/RPM-GPG-KEY-KernelCare\ngpgcheck=1\nEOL\n")])])]),t("p",[e._v("KernelCare.eportalをインストールします。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ yum install kcare-eportal\n")])])]),t("h2",{attrs:{id:"eportalマシンでプロキシを調整する方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#eportalマシンでプロキシを調整する方法","aria-hidden":"true"}},[e._v("#")]),e._v(" ePortalマシンでプロキシを調整する方法")]),e._v(" "),t("p",[e._v("ePortalマシンではコマンドラインで使用するのと同じプロキシ設定を定義する必要があります。")]),e._v(" "),t("p",[e._v("これを行うには "),t("span",{staticClass:"notranslate"},[t("code",[e._v("PROXY = 'https://example.com'")])]),e._v(" を次のファイルに追加します。: "),t("span",{staticClass:"notranslate"},[t("code",[e._v("/usr/share/kcare-eportal/config/local.py")])])]),e._v(" "),t("p",[e._v("このファイルが存在しない場合、NGINXの所有者で作成してください。:")]),e._v(" "),t("div",{staticClass:"notranslate"},[t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("echo \"PROXY = 'https://example.com'\" > /usr/share/kcare-eportal/config/local.py\nchown nginx:nginx /usr/share/kcare-eportal/config/local.py\n")])])])]),e._v(" "),t("p",[e._v("ePortal をリスタートします。("),t("RouterLink",{attrs:{to:"/jp/kernelcare-enterprise/#停止とスタート"}},[e._v("停止とスタート")]),e._v(" セクションを参照し、対応するOSを選択してください)。")],1),e._v(" "),t("h2",{attrs:{id:"ユーザを管理する"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ユーザを管理する","aria-hidden":"true"}},[e._v("#")]),e._v(" ユーザを管理する")]),e._v(" "),t("p",[t("code",[e._v("/usr/bin/kc.eportal")]),e._v(" ユーティリティを使用し、ポータルを管理できます。:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th"),e._v(" "),t("th"),e._v(" "),t("th")])]),e._v(" "),t("tbody",[t("tr",[t("td",[t("code",[e._v("-l")])]),e._v(" "),t("td",[t("code",[e._v("--list-users")])]),e._v(" "),t("td",[e._v("すべてのユーザを一覧表示")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("-a")])]),e._v(" "),t("td",[t("code",[e._v("--add-user")])]),e._v(" "),t("td",[e._v("ユーザを追加")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("-d")])]),e._v(" "),t("td",[t("code",[e._v("--delete-user")])]),e._v(" "),t("td",[e._v("ユーザを削除")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("-c")])]),e._v(" "),t("td",[t("code",[e._v("--change-password")])]),e._v(" "),t("td",[e._v("ユーザパスワードを変更")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("-p")])]),e._v(" "),t("td",[t("code",[e._v("--password")])]),e._v(" "),t("td",[e._v("ユーザのパスワードを指定")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("-h")])]),e._v(" "),t("td",[t("code",[e._v("--help")])]),e._v(" "),t("td",[e._v("ヘルプを表示")])])])]),e._v(" "),t("p",[e._v("ユーザを追加するには、次のコマンドを実行します。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ kc.eportal -a admin -p AdminPassword\n")])])]),t("p",[e._v("ユーザのパスワードを変更するには、次のコマンドを実行します。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ kc.eportal -c admin -p NewPassword\n")])])]),t("h3",{attrs:{id:"ldap認証"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ldap認証","aria-hidden":"true"}},[e._v("#")]),e._v(" LDAP認証")]),e._v(" "),t("p",[e._v("ePortalはLDAP認証を使って、安全な接続をサポートします。")]),e._v(" "),t("p",[e._v("ユーザログインの入力をするため、LDAP接続の文字列を指定します。")]),e._v(" "),t("p",[e._v("例:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("uid=%s,dc=example,dc=com\n")])])]),t("p",[e._v("ここでの")]),e._v(" "),t("p",[t("code",[e._v("uid=%s")]),e._v(" は、key属性であり "),t("code",[e._v("%s")]),e._v(" を含める必要があります。")]),e._v(" "),t("p",[e._v("LDAP URLを使用してセキュリティ設定とセットアップタイムアウトを指定することもできます。")]),e._v(" "),t("p",[e._v("初めてLDAP資格情報でePortalにログインすると、デフォルトでLDAPユーザ名、読み取り専用権限、およびLDAPの説明を持つユーザがデータベースに作成されます("),t("code",[e._v("https://<eportal>/admin/user/")]),e._v(")。")]),e._v(" "),t("p",[e._v("下図では、 "),t("code",[e._v("kc.eportal")]),e._v(" コマンドラインインターフェースで作成された一人のユーザと、LDAP認証情報でログインされた二人のユーザを見つけることができます。")]),e._v(" "),t("p",[t("img",{attrs:{src:"/images/eportalLDAPusers.png",alt:""}})]),e._v(" "),t("p",[e._v("このLDAPユーザ管理者権限を設定するには、 "),t("code",[e._v("read-only=False")]),e._v(" と設定します。(編集アクセスが必要です)")]),e._v(" "),t("h4",{attrs:{id:"ローカルユーザとldapユーザの間に、違いはありますか？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ローカルユーザとldapユーザの間に、違いはありますか？","aria-hidden":"true"}},[e._v("#")]),e._v(" "),t("strong",[e._v("ローカルユーザとLDAPユーザの間に、違いはありますか？")])]),e._v(" "),t("p",[e._v("違いはログイン手順です。 ローカルユーザのログインとパスワードはローカルデータベースに保存されますが、LDAPユーザの場合は、ログインと許可のみがローカルデータベースに保存され、認証はLDAPサーバ経由で行われます。")]),e._v(" "),t("p",[e._v("ユーザーがePortalにログインすると、ePortalは最初にローカルデータベースのユーザ認証情報を確認します。 認証情報が見つかった場合、ユーザは認証され、ユーザ認証情報が見つからない場合にのみ、ePortalはLDAPにリダイレクトします。")]),e._v(" "),t("h2",{attrs:{id:"eportalにアクセス"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#eportalにアクセス","aria-hidden":"true"}},[e._v("#")]),e._v(" ePortalにアクセス")]),e._v(" "),t("p",[e._v("KernelCare.eportalマネジメントコンソールにアクセスするには "),t("strong",[e._v("https://YOUR_IP/admin")]),e._v(" に接続します。")]),e._v(" "),t("p",[e._v("その後、あなたのログイン名とパスワードを入力してください。")]),e._v(" "),t("p",[t("img",{attrs:{src:"/images/access_eportal.png",alt:""}})]),e._v(" "),t("p",[t("RouterLink",{attrs:{to:"/jp/kernelcare-enterprise/#ユーザを管理する"}},[e._v("kc.eportal tool")]),e._v(" を使ってあなたのログイン情報を管理することができます。")],1),e._v(" "),t("h2",{attrs:{id:"パッチセットの展開"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#パッチセットの展開","aria-hidden":"true"}},[e._v("#")]),e._v(" パッチセットの展開")]),e._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[e._v("注記")]),t("p",[e._v("ePortal ver0.8以降")])]),t("p",[e._v("KernelCare.ePortalには最新のパッチをダウンロードするためのメカニズムが組み込まれています。使用を開始するには、KernelCare.ePortalナビゲーションバーの "),t("em",[e._v("Patch Source")]),e._v(" リンクをクリックしてから Settings をクリックします。パッチソースへのアクセス情報はKernelCare社もしくはその代理者から提供されます。")]),e._v(" "),t("p",[t("img",{attrs:{src:"/images/eportal_dep01_1_zoom70.png",alt:""}})]),e._v(" "),t("p",[e._v("パッチソースアクセス情報を設定すると、利用可能なパッチセットのリストが表示されます。 "),t("em",[e._v("Source")]),e._v(" リンクをクリックすると、いつでも戻ってアクセス情報を変更できます。")]),e._v(" "),t("p",[t("img",{attrs:{src:"/images/eportal_dep02_1_zoom70.png",alt:""}})]),e._v(" "),t("p",[t("em",[e._v("[changelog]")]),e._v(" をクリックすると、指定されたパッチセットの変更履歴が表示されます。\n"),t("em",[e._v("[deploy this patch, and all before it]")]),e._v(" をクリックすると、このパッチセットとそれ以前のすべてのパッチセットをダウンロードし、展開します。パッチセットは正しい順序で充てていかないと、展開されません。")]),e._v(" "),t("h2",{attrs:{id:"keyを管理する"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#keyを管理する","aria-hidden":"true"}},[e._v("#")]),e._v(" Keyを管理する")]),e._v(" "),t("p",[e._v("新しいサーバを登録するには、サーバ登録に使用されるKernelCareキーを作成する必要があります。\nKeyのリストに移動するには、左上のKernelCare ePortalロゴをクリックしてください。")]),e._v(" "),t("p",[t("img",{attrs:{src:"/images/key-menu_zoom70.png",alt:""}})]),e._v(" "),t("ul",[t("li",[e._v("Keyを編集するには、 "),t("img",{attrs:{src:"/images/eportal_keys_edit.png",alt:""}}),e._v(" をクリックします。 "),t("em",[e._v("Edit")]),e._v(" タブが開きます。")]),e._v(" "),t("li",[e._v("Keyを削除するには、 "),t("img",{attrs:{src:"/images/eportal_keys_remove.png",alt:""}}),e._v(" をクリックします。 Keyを削除すると、そのKeyの下にあるすべてのサーバが削除されることに注意してください。")]),e._v(" "),t("li",[e._v("Keyをクリックして Servers タブに移動すると、そのKeyの下に "),t("RouterLink",{attrs:{to:"/jp/kernelcare-enterprise/#サーバの管理"}},[e._v("登録されているサーバ")]),e._v(" のリストが表示されます。そのタブでサーバを削除することもできます。")],1)]),e._v(" "),t("p",[e._v("新しい登録を作成するには "),t("em",[e._v("Create")]),e._v(" タブをクリックします。\n"),t("img",{attrs:{src:"/images/key-creation_zoom70.png",alt:""}}),e._v("\n以下のフィールドに入力してください。:")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("Key")]),e._v(" —  Key名を入力するかフィールドを空白のままにすることができます。空白の場合、自動生成された名前が使用されます。")]),e._v(" "),t("li",[t("strong",[e._v("Description")]),e._v(" — Keyの説明を入力できます。")]),e._v(" "),t("li",[t("strong",[e._v("Server Limit")]),e._v(" — そのキーの下に登録可能なサーバの数")]),e._v(" "),t("li",[t("strong",[e._v("Feed")]),e._v(" — 特定のフィードを選択するか、空白のままにします。")])]),e._v(" "),t("p",[t("em",[e._v("Save")]),e._v(" をクリックしてキーを追加します。新しい登録キーが作成され、リストに追加されます。Key自体は個々のサーバで登録コマンドの一部として使用されます。")]),e._v(" "),t("p",[t("em",[e._v("Save and Add Another")]),e._v(" をクリックすると、このKeyが保存され、Keyがもう1つ追加されます。")]),e._v(" "),t("p",[t("em",[e._v("Save and Continue Editing")]),e._v(" をクリックすると、Keyが追加され、Key編集タブが開かれます。")]),e._v(" "),t("p",[t("em",[e._v("Cancel")]),e._v(" をクリックすると、新しいKeyを追加せずにKeyリストタブに戻ります。")]),e._v(" "),t("h2",{attrs:{id:"サーバの管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#サーバの管理","aria-hidden":"true"}},[e._v("#")]),e._v(" サーバの管理")]),e._v(" "),t("p",[t("RouterLink",{attrs:{to:"/jp/kernelcare-enterprise/#keyを管理する"}},[e._v("Keyを管理する")]),e._v(" のインターフェイスで Key自体をクリックすると、そのKeyに属するサーバを確認できます。")],1),e._v(" "),t("p",[t("img",{attrs:{src:"/images/server_list_1_zoom70.png",alt:""}})]),e._v(" "),t("p",[e._v("画面にはKeyの下で登録されている　サーバ　IP、ホスト名、有効なカーネル、および登録時刻と最後のチェックインが表示されます。")]),e._v(" "),t("h3",{attrs:{id:"スクリプトの管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#スクリプトの管理","aria-hidden":"true"}},[e._v("#")]),e._v(" スクリプトの管理")]),e._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[e._v("注記")]),t("p",[e._v("スクリプトがePortalで機能しない場合、最初にePortalをアップデートする必要があります。 ePortalをアップデートするには、次のコマンドを実行します。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("> yum update kcare-eportal\n")])])])]),t("p",[e._v("特定のキーに接続されているすべてのサーバIDのリストを表示するには以下を実行します。:")]),e._v(" "),t("ul",[t("li",[e._v("UIではKeyのリストがあるページに移動します。それから特定のKeyをクリックします。このKeyに接続されているサーバのリストが表示されます。")])]),e._v(" "),t("p",[e._v("どのKeyにも接続されていないすべてのサーバIDのリストを表示するには、ナビゲーションバーの "),t("span",{staticClass:"notranslate"},[t("em",[e._v("Servers")])]),e._v(" ボタンを使用します。")]),e._v(" "),t("p",[t("img",{attrs:{src:"/images/eportal-servers.png",alt:""}})]),e._v(" "),t("h3",{attrs:{id:"パッチセットを展開するスクリプト"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#パッチセットを展開するスクリプト","aria-hidden":"true"}},[e._v("#")]),e._v(" パッチセットを展開するスクリプト")]),e._v(" "),t("p",[e._v("パッチセットを展開するには、次のコマンドを実行します。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("> kc.eportal --unroll 16012017_1\n")])])]),t("h3",{attrs:{id:"keyごとにeportalの管理下にあるサーバの数を決定するスクリプト"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#keyごとにeportalの管理下にあるサーバの数を決定するスクリプト","aria-hidden":"true"}},[e._v("#")]),e._v(" KeyごとにePortalの管理下にあるサーバの数を決定するスクリプト")]),e._v(" "),t("p",[e._v("Keyのペア/サーバ数を確認するには、次のコマンドを実行します。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("> kc.eportal --list-servers\n")])])]),t("table",[t("thead",[t("tr",[t("th"),e._v(" "),t("th")])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("Count")]),e._v(" "),t("td",[e._v("Key")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("0")])]),e._v(" "),t("td",[t("code",[e._v("2shcolu7Y1x6885Q")])])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("2")])]),e._v(" "),t("td",[t("code",[e._v("6J89aS44j6OmTr05")])])])])]),e._v(" "),t("h3",{attrs:{id:"最新のパッチセットを自動的にインストールするためのスクリプト"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#最新のパッチセットを自動的にインストールするためのスクリプト","aria-hidden":"true"}},[e._v("#")]),e._v(" 最新のパッチセットを自動的にインストールするためのスクリプト")]),e._v(" "),t("p",[e._v("最新のパッチが利用可能かどうかを判断し、インストールします。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(">kc.eportal --get-latest\n")])])]),t("h3",{attrs:{id:"uiからパッチを展開する"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uiからパッチを展開する","aria-hidden":"true"}},[e._v("#")]),e._v(" UIからパッチを展開する")]),e._v(" "),t("p",[e._v("パッチソースページには利用可能なパッチのリストがあります。パッチを展開するには "),t("em",[e._v("Roll back this patch, and all after it")]),e._v(" ボタンをクリックします。\nパッチとそれ以降のすべてのパッチをロールバックするために使用します。")]),e._v(" "),t("h3",{attrs:{id:"管理uiに拡張チェックイン統計を表示する"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#管理uiに拡張チェックイン統計を表示する","aria-hidden":"true"}},[e._v("#")]),e._v(" 管理UIに拡張チェックイン統計を表示する")]),e._v(" "),t("p",[e._v("新しいテーブルが開始ページに追加されます。このテーブルには次のものが表示されます。:")]),e._v(" "),t("ul",[t("li",[e._v("サーバの総数")]),e._v(" "),t("li",[e._v("過去48時間にチェックインしたサーバの数")])]),e._v(" "),t("p",[e._v("各Keyのサーバ数は "),t("em",[e._v("Key Inventory")]),e._v(" テーブルに表示されます。")]),e._v(" "),t("h3",{attrs:{id:"読み取り専用ユーザを作成する機能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#読み取り専用ユーザを作成する機能","aria-hidden":"true"}},[e._v("#")]),e._v(" 読み取り専用ユーザを作成する機能")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("[root@localhost ~]# kc.eportal -l\nNum | Username\n--- + --------------------------------\n 1 | admin\n 2 | user\n[root@localhost ~]# kc.eportal -r user\nUser 'user' is now readonly\n")])])]),t("h3",{attrs:{id:"フィード管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#フィード管理","aria-hidden":"true"}},[e._v("#")]),e._v(" フィード管理")]),e._v(" "),t("p",[e._v("フィードはサーバ上のパッチセットを管理することを目的としており、パッチセットを特定のKeyにバインドする可能性を提供します。 使用例: パッチの予備テスト、類似のハードウェアを持つサーバグループへのアップデートの適用など。")]),e._v(" "),t("p",[e._v("フィード管理インターフェースに入るには Settings → Feeds と進みます。:")]),e._v(" "),t("p",[t("img",{attrs:{src:"/images/feed-button_zoom70.png",alt:""}})]),e._v(" "),t("p",[e._v("このページにおいてユーザは既存のフィードを管理することができます。: create(作成)、delete(削除)、edit(編集)")]),e._v(" "),t("p",[t("img",{attrs:{src:"/images/feed-menu_zoom70.png",alt:""}})]),e._v(" "),t("p",[e._v("利用可能なオプション:")]),e._v(" "),t("ul",[t("li",[e._v("Name — フィードの名前")]),e._v(" "),t("li",[e._v("Auto update — このフィードへのパッチの自動ダウンロードを有効または無効にします")]),e._v(" "),t("li",[e._v("Deploy after X hours — パッチセットが展開可能になってからフィードにインストールされるまでの時間")])]),e._v(" "),t("p",[e._v("10分ごとにePortalは、メインのパッチサーバで新しいパッチをチェックしています。新しいパッチが入手可能であれば、ePortalサーバにアップロードされます。 注記: そのパッチはアップロードされていますが、展開はされていません。パッチの入手可能時間は新しいパッチがePortalに表示された時点から開始すると考えられ、その時間は "),t("code",[e._v("Deploy after X hours")]),e._v(" オプションで設定されます。従って、ユーザが "),t("code",[e._v("Deploy after X hours = 10")]),e._v(" と設定すると、パッチはePortalサーバにダウンロードされてから10時間後にフィードに展開されます。")]),e._v(" "),t("p",[e._v("フィードをすぐに自動アップデートする（つまり、ePortalで利用可能になった直後に新しいパッチがフィードにロードされるようにする）には、 "),t("code",[e._v("Deploy after X hours = 0")]),e._v(" に設定します。")]),e._v(" "),t("p",[e._v("特別なケースとしては、ePortalが新しいサーバにインストールされている場合のクリーンインストールです（デフォルトフィードを含みパッチを含むダウンロードされたアーカイブや展開されたパッチセットを含むフィードはありません）。この場合、ユーザが新しいフィードを作成して　Deployed after X hours　オプションをすぐに設定すると、指定したX時間後にすべてのパッチ（最も古いものから最新のものまで）がフィードに展開されます。これはアーカイブが最初からダウンロードされ、「ePortalに表示されたばかり」と見なされるためです。つまりすべてのパッチはePortal上で同じ出現時刻を持ち、それ以降は Deploy after X hours オプションは無効になります。")]),e._v(" "),t("p",[t("img",{attrs:{src:"/images/feedmanagement3_zoom70.png",alt:""}})]),e._v(" "),t("p",[e._v("メインのePortalページにてユーザは対応するKey <> フィードペアを設定できます。 これはKey作成インターフェースまたはKeyを編集するときに行われます。")]),e._v(" "),t("p",[t("img",{attrs:{src:"/images/feedmanagement4_zoom70.png",alt:""}})]),e._v(" "),t("p",[e._v("デフォルトでは新しいKeyはデフォルトのフィードにバインドされています。もしくはユーザはドロップダウンメニューから目的のフィードを選択できます。")]),e._v(" "),t("p",[t("img",{attrs:{src:"/images/feedmanagement5_01_zoom70.png",alt:""}})]),e._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[e._v("注記")]),t("p",[e._v("フィードを削除すると、このフィードに添付されているすべてのKeyがデフォルトのフィードに移動します。")])]),t("p",[t("img",{attrs:{src:"/images/feedmanagement6_zoom70.png",alt:""}})]),e._v(" "),t("h3",{attrs:{id:"追加タグフィールドを追加する"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#追加タグフィールドを追加する","aria-hidden":"true"}},[e._v("#")]),e._v(" 追加タグフィールドを追加する")]),e._v(" "),t("p",[e._v("サーバに追加タグフィールドを追加するには、次のコマンドを実行します。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("kcarectl --tag command\n")])])]),t("p",[e._v("この "),t("code",[e._v("command")]),e._v(" はユーザが定義したパラメーターです。このパラメータはサーバのUIに表示されます。ユーザは各サーバに複数のタグを追加できます。各タグは "),t("code",[e._v(";")]),e._v(" で区切る必要があります。")]),e._v(" "),t("p",[e._v("例:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('kcarectl --tag "env:prod;ubuntu"\n')])])]),t("p",[e._v("このサーバには2つのタグがあります。: "),t("code",[e._v("env:prod")]),e._v(" と "),t("code",[e._v("ubuntu")]),e._v(".")]),e._v(" "),t("p",[t("code",[e._v("env:prod")]),e._v(" はタグ名 "),t("code",[e._v("env")]),e._v(" と 値 "),t("code",[e._v("prod")]),e._v("　を持つパラメータです。")]),e._v(" "),t("p",[t("img",{attrs:{src:"/images/addingextratagfield_zoom88.png",alt:""}})]),e._v(" "),t("p",[e._v("特定のサーバからすべてのタグを削除するには、次のコマンドを実行します。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('kcarectl --tag ""\n')])])]),t("p",[e._v("この "),t("code",[e._v('""')]),e._v(" は以前に定義したタグを削除するためのパラメータです。")]),e._v(" "),t("h3",{attrs:{id:"httpsを使用するeportalを設定する方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#httpsを使用するeportalを設定する方法","aria-hidden":"true"}},[e._v("#")]),e._v(" HTTPSを使用するePortalを設定する方法")]),e._v(" "),t("p",[e._v("e-portalが展開されているサーバに関するいくつかの前提条件:")]),e._v(" "),t("ol",[t("li",[e._v("ファイアウォールが443ポートで無効になっている。")]),e._v(" "),t("li",[e._v("プライベートKeyとパブリックKeyがサーバにダウンロードされている。")])]),e._v(" "),t("ul",[t("li",[e._v("証明書に従ってSSL設定テンプレートを編集します。:")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("mv /etc/nginx/eportal.ssl.conf.example /etc/nginx/eportal.ssl.conf\nvi /etc/nginx/eportal.ssl.conf\n")])])]),t("ul",[t("li",[e._v("この設定をメインの設定に含めます。:")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sed -e '3iinclude eportal.ssl.conf;' -i /etc/nginx/conf.d/eportal.conf\n")])])]),t("ul",[t("li",[e._v("nginxをリスタートします。:")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("service nginx restart\n")])])]),t("p",[e._v("アップデートされたhttps、e-portalと通信するためには、IPがハードコードされたサーバ設定がある場合、すべてのサーバ上のKernelCare設定ファイルを変更する必要があります。")]),e._v(" "),t("p",[e._v("そうするためには "),t("code",[e._v("PATCH_SERVER")]),e._v(" 環境変数と "),t("code",[e._v("REGISTRATION_URL")]),e._v(" 環境変数をアップデートします。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("vi /etc/sysconfig/kcare/kcare.conf\n")])])]),t("p",[e._v("したがって "),t("code",[e._v("/etc/sysconfig/kcare/kcare.conf")]),e._v(" を編集した後、以下の例のようにアップデートされた "),t("code",[e._v("PATCH_SERVER")]),e._v(" および "),t("code",[e._v("REGISTRATION_URL")]),e._v(" 環境変数を含める必要があります。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("PATCH_SERVER=https://eportal_domain_name/\nREGISTRATION_URL=https://eportal_domain_name/admin/api/kcare\n")])])]),t("p",[e._v("次の例はhttps用に設定されたe-portalに新しいサーバを接続する方法を示しています。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ export KCARE_PATCH_SERVER=https://eportal_domain_name/\n$ export KCARE_REGISTRATION_URL=https://eportal_domain_name/admin/api/kcare\n$ export KCARE_MAILTO=admin@mycompany.com\n$ curl -s https://repo.cloudlinux.com/kernelcare/kernelcare_install.sh | bash\n$ /usr/bin/kcarectl --register key_from_your_eportal\n")])])]),t("h2",{attrs:{id:"kernelcareの展開"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kernelcareの展開","aria-hidden":"true"}},[e._v("#")]),e._v(" KernelCareの展開")]),e._v(" "),t("p",[e._v("ePortalを使用するために、kernelcareクライアントソフトウェアを展開するには、RPMをインストールする前に以下の環境変数を設定する必要があります。:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th"),e._v(" "),t("th"),e._v(" "),t("th")])]),e._v(" "),t("tbody",[t("tr",[t("td",[t("strong",[e._v("環境変数")])]),e._v(" "),t("td",[t("strong",[e._v("値")])]),e._v(" "),t("td",[t("strong",[e._v("説明")])])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("KCARE_PATCH_SERVER")])]),e._v(" "),t("td",[e._v("https://eportal_ip/")]),e._v(" "),t("td",[e._v("パッチのダウンロード元となるサーバのURL")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("KCARE_REGISTRATION_URL")])]),e._v(" "),t("td",[e._v("https://eportal_ip/admin/api/kcare")]),e._v(" "),t("td",[e._v("ePortalのapiのURL")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("KCARE_MAILTO [ver2.5以降]")])]),e._v(" "),t("td",[e._v("email@address")]),e._v(" "),t("td",[e._v("KernelCareアップデートの失敗に関連する全ての通知を受け取るEmailアドレス。 "),t("code",[e._v("/etc/cron.d/kcare-cron")]),e._v("　で使用。")])])])]),e._v(" "),t("p",[e._v("例:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ export KCARE_PATCH_SERVER=https://10.1.10.115/\n$ export KCARE_REGISTRATION_URL=https://10.1.10.115/admin/api/kcare\n$ export KCARE_MAILTO=admin@mycompany.com\n$ curl -s https://repo.cloudlinux.com/kernelcare/kernelcare_install.sh | bash\n$ kcarectl --register r72fF838Q47oWigj\n")])])]),t("h2",{attrs:{id:"kernelcareクライアント設定ファイル"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kernelcareクライアント設定ファイル","aria-hidden":"true"}},[e._v("#")]),e._v(" KernelCareクライアント設定ファイル")]),e._v(" "),t("p",[e._v("KernelCareクライアント設定ファイルは "),t("code",[e._v("/etc/sysconfig/kcare/kcare.conf")]),e._v(" にあります。")]),e._v(" "),t("p",[e._v("例:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("AUTO_UPDATE=True\nPATCH_SERVER=https://10.1.10.115/\nREGISTRATION_URL=https://10.1.10.115/admin/api/kcare\n")])])]),t("p",[t("code",[e._v("AUTO_UPDATE")]),e._v(" が "),t("code",[e._v("True")]),e._v(" に設定されている場合、KernelCareクライアントは4時間ごとにチェックインし、最新のパッチをダウンロードして適用しようとします。")]),e._v(" "),t("p",[t("code",[e._v("PATCH_SERVER")]),e._v(" - パッチのダウンロード元となるサーバ")]),e._v(" "),t("p",[t("code",[e._v("REGISTRATION_URL")]),e._v(" - サーバの登録/登録解除に使用されるURL")]),e._v(" "),t("h2",{attrs:{id:"展開の自動化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#展開の自動化","aria-hidden":"true"}},[e._v("#")]),e._v(" 展開の自動化")]),e._v(" "),t("p",[e._v("Ansible/Puppet/Chef/Saltのような自動化ツールを使用して、多数のシステムにKernelCareをインストールして操作することが可能です。")]),e._v(" "),t("p",[e._v("展開プロセスは次を含みます。:")]),e._v(" "),t("ul",[t("li",[e._v("KernelCareエージェントパッケージのダウンロード、配布、およびインストール")]),e._v(" "),t("li",[e._v("ePortal関連のエントリで "),t("code",[e._v("/etc/sysconfig/kcare/kcare.conf")]),e._v(" のアップデート")]),e._v(" "),t("li",[e._v("アクティベーションキーを使用してKernelCareエージェントを登録")])]),e._v(" "),t("h3",{attrs:{id:"ansible"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ansible","aria-hidden":"true"}},[e._v("#")]),e._v(" Ansible")]),e._v(" "),t("p",[e._v("自動展開を始めるためには、下記の情報を特定する必要があります。:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("eportal_srv")]),e._v(" Ansible変数の中の ePortalサーバ名（もしくはIP）。 他の設定ファイルオプションは、 "),t("RouterLink",{attrs:{to:"/jp/config-options/"}},[e._v("設定オプション")]),e._v(" と "),t("RouterLink",{attrs:{to:"/jp/kernelcare-enterprise/#KernelCareクライアント設定ファイル"}},[e._v("KernelCareクライアント設定ファイル")]),e._v(" (ePortal)で見つけることができます。")],1),e._v(" "),t("li",[t("code",[e._v("activation_key")]),e._v(" Ansible変数の中の アクティベーションkey。 アクティベーションkeyは、ePortalの中にある "),t("RouterLink",{attrs:{to:"/jp/kernelcare-enterprise/#keyを管理する"}},[e._v("Keyを管理する")]),e._v(" (ePortal)で、生成することができます。")],1)]),e._v(" "),t("p",[e._v("展開フェーズ用のAnsible playbookは、下記の様になるはずです(RPMベースのディストリビューション)。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("- hosts: el7_based\n  vars:\n    eportal_srv: http://192.168.245.105\n    activation_key: jvQ5T0SVMt7736a9\n  tasks:\n  - name: Copy an installation package, use the package that suits your target platform (see KernelCare install script for download links)\n    get_url:\n      url: https://repo.cloudlinux.com/kernelcare/kernelcare-latest-7.rpm\n      dest: /root/kernelcare-latest-7.rpm\n    delegate_to: 127.0.0.1\n    become: false\n\n  - name: Distribute the installation package\n    copy:\n      src: /root/kernelcare-latest-7.rpm\n      dest: /root/kernelcare-latest-7.rpm\n\n  - name: install the package from a local file\n    yum:\n      name: /root/kernelcare-latest-7.rpm\n      state: present\n\n  - name: Update kcare.conf with ePortal configuration\n    blockinfile:\n      path: /etc/sysconfig/kcare/kcare.conf\n      block: |\n        PATCH_SERVER={{ eportal_srv }}/\n        REGISTRATION_URL={{ eportal_srv }}/admin/api/kcare\n\n  - name: register KernelCare agents\n    command: /usr/bin/kcarectl --register {{ activation_key }}\n")])])]),t("p",[e._v("Ubuntu/Debianを使用している場合、playbookは下記のようになります。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("- hosts: deb8_based\n  vars:\n    eportal_srv: http://192.168.245.105\n    activation_key: jvQ5T0SVMt7736a9\n  tasks:\n  - name: Copy an installation package, use the package that suits your target platform (see KernelCare install script for download links)\n    get_url:\n      url: https://repo.cloudlinux.com/kernelcare-debian/kernelcare-latest-8.deb\n      dest: /root/kernelcare-latest-8.deb\n    delegate_to: 127.0.0.1\n    become: false\n\n  - name: Distribute an installation package\n    copy:\n      src: /root/kernelcare-latest-8.deb\n      dest: /root/kernelcare-latest-8.deb\n\n  - name: install the package from a local file\n    apt:\n      deb: /root/kernelcare-latest-8.deb\n\n  - name: Update kcare.conf with ePortal configuration\n    blockinfile:\n      path: /etc/sysconfig/kcare/kcare.conf\n      block: |\n        PATCH_SERVER={{ eportal_srv }}/\n        REGISTRATION_URL={{ eportal_srv }}/admin/api/kcare\n\n  - name: register KernelCare agents\n    command: /usr/bin/kcarectl --register {{ activation_key }}\n")])])]),t("p",[e._v("KernelCare agentをリムーブするためのAnsible playbookファイルの例:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("- hosts: el7_based\n  tasks:\n    - name: unregister KernelCare agents\n      command: /usr/bin/kcarectl --unregister\n\n    - name: remove kernelcare package\n      yum:\n        name: kernelcare\n        state: absent\n")])])]),t("p",[e._v("Ubuntu/Debianシステム向け:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("- hosts: deb8_based\n  tasks:\n    - name: unregister KernelCare agents\n      command: /usr/bin/kcarectl --unregister\n\n    - name: remove kernelcare package\n      apt:\n        name: kernelcare\n        state: absent\n")])])]),t("h2",{attrs:{id:"eportal-ip-の変更"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#eportal-ip-の変更","aria-hidden":"true"}},[e._v("#")]),e._v(" ePortal IP の変更")]),e._v(" "),t("p",[e._v("ePortal IPはいつでも変更できますが、IPがハードコードされている場合、すべてのサーバ上のKernelCare設定ファイルを変更する必要があります。")]),e._v(" "),t("p",[e._v("これを行うには "),t("code",[e._v("/etc/sysconfig/kcare/kcare.conf")]),e._v(" を編集します。")]),e._v(" "),t("p",[e._v("変更:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("PATCH_SERVER=http://10.1.10.115/\nREGISTRATION_URL=http://10.1.10.115/admin/api/kcare\n")])])]),t("p",[e._v("正しいロケーションを指定します。")]),e._v(" "),t("h2",{attrs:{id:"設定とロケーション"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#設定とロケーション","aria-hidden":"true"}},[e._v("#")]),e._v(" 設定とロケーション")]),e._v(" "),t("p",[e._v("Webサーバ（nginx）の設定は "),t("code",[e._v("/etc/nginx/conf.d/eportal.conf")]),e._v(" にあります。")]),e._v(" "),t("p",[e._v("データベース（sqlite）は "),t("code",[e._v("/usr/share/kcare-eportal/data.sqlite")]),e._v(" に保管されています。\nデータベースをリセットするには、次のコマンドを実行します。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ rm /usr/share/kcare-eportal/data.sqlite\n$ cd /usr/share/kcare-eportal && python createdb.py\n")])])]),t("p",[e._v("サーバがパッチにアクセスできるかどうかを判断するために使用されるクライアントアクセスデータファイルは、 "),t("code",[e._v("/usr/share/kcare-eportal/kcare_servers.htpasswd")]),e._v(" に格納されています。")]),e._v(" "),t("p",[e._v("パッチは "),t("code",[e._v("/usr/share/kcare-eportal/patches")]),e._v(" に格納されています。")]),e._v(" "),t("h2",{attrs:{id:"停止とスタート"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#停止とスタート","aria-hidden":"true"}},[e._v("#")]),e._v(" 停止とスタート")]),e._v(" "),t("h3",{attrs:{id:"el7上のkernelcare-eportal-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#el7上のkernelcare-eportal-2","aria-hidden":"true"}},[e._v("#")]),e._v(" EL7上のKernelCare.ePortal")]),e._v(" "),t("p",[e._v("nginxサーバの設定を 停止/スタート/再読み込み/再スタート するには次のコマンドを実行します。:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ systemctl stop|start|reload|restart nginx\n")])])]),t("p",[e._v("ePortalを 停止/スタート/再スタート するには、次のコマンドを実行します。（Python）:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ systemctl stop|start|restart emperor.uwsgi\n")])])]),t("h2",{attrs:{id:"ログファイル"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ログファイル","aria-hidden":"true"}},[e._v("#")]),e._v(" ログファイル")]),e._v(" "),t("p",[e._v("ePortal メッセージ/エラー: "),t("code",[e._v("/var/log/uwsgi/uwsgi-emperor.log")])]),e._v(" "),t("p",[e._v("nginx ePortal アクセスログ: "),t("code",[e._v("/var/log/nginx/kcare-eportal.log")])]),e._v(" "),t("p",[e._v("nginx エラーログ: "),t("code",[e._v("/var/log/nginx/error_log")])]),e._v(" "),t("h2",{attrs:{id:"nagios-と-zabbixのサポート"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nagios-と-zabbixのサポート","aria-hidden":"true"}},[e._v("#")]),e._v(" Nagios と Zabbixのサポート")]),e._v(" "),t("p",[e._v("バージョン1.2以降のKernelCare.ePortalは "),t("RouterLink",{attrs:{to:"/jp/kc-agent-monitoring/#nagios-plugin"}},[e._v("Nagios")]),e._v(" および "),t("RouterLink",{attrs:{to:"/jp/kc-agent-monitoring/#zabbix-template"}},[e._v("Zabbix")]),e._v(" モニターと同様のサーバモニターをサポートしています。")],1),e._v(" "),t("p",[e._v("APIを直接カールして情報を受け取ることができます:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("https://yourserver/admin/api/kcare/nagios/KCAREKEY\n")])])]),t("p",[e._v("または "),t("a",{attrs:{href:"https://patches.kernelcare.com/downloads/nagios/check_kcare",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://patches.kernelcare.com/downloads/nagios/check_kcare"),t("OutboundLink")],1),e._v(" スクリプトを使用して、自分のサーバを指すように KEY_KCARE_NAGIOS_ENDPOINT を変更することもできます ( "),t("a",{attrs:{href:"https://cln.cloudlinux.com/clweb",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://cln.cloudlinux.com/clweb"),t("OutboundLink")],1),e._v(" （古いUIへのリンク）を変更、または "),t("a",{attrs:{href:"https://cln.cloudlinux.com/console/auth/login",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://cln.cloudlinux.com/console/auth/login"),t("OutboundLink")],1),e._v(" （新しいUIへのリンク）とともに "),t("a",{attrs:{href:"https://yourserver/admin",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://yourserver/admin"),t("OutboundLink")],1),e._v(" を変更)。")]),e._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[e._v("注記")]),t("p",[t("code",[e._v("PARTNER_LOGIN/TOKEN")]),e._v(" を使用したアクセスはKernelCare.ePortalではサポートされていません。")])]),t("h2",{attrs:{id:"使用状況レポート"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用状況レポート","aria-hidden":"true"}},[e._v("#")]),e._v(" 使用状況レポート")]),e._v(" "),t("p",[e._v("一般的な場合、使用状況レポートは自動的に送信されますが、それが不可能な場合、ePortalsはレポートを電子メールとして送信しようとします。 そのためには、ホストで構成済みのSendmail（SSMTP）が必要です。 以下に簡単な説明があります。")]),e._v(" "),t("p",[e._v("メールの送信に失敗すると、ePortalはレポートを "),t("code",[e._v("/usr/share/kcare-eportal/reports")]),e._v(" に保存します。これは手動で送信する必要があります。")]),e._v(" "),t("h3",{attrs:{id:"sendmail（ssmtp）を構成する方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sendmail（ssmtp）を構成する方法","aria-hidden":"true"}},[e._v("#")]),e._v(" Sendmail（SSMTP）を構成する方法")]),e._v(" "),t("p",[e._v("まず、 "),t("code",[e._v("ssmtp")]),e._v(" をインストールする必要があります。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("yum install -y ssmtp\n")])])]),t("p",[e._v("SMTPサーバの構成に従って、"),t("code",[e._v("/etc/ssmtp/ssmtp.conf")]),e._v(" ファイルを編集します。 以下は、Gmailアカウントに接続する一般的な方法を説明する簡単な設定ファイルです。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("root=username@gmail.com\nmailhub=smtp.gmail.com:587\nhostname=localhost\nUseSTARTTLS=YES\nAuthUser=username@gmail.com\nAuthPass=xxxxxxxxxxxxxxxxxxx\nFromLineOverride=YES\nTLS_CA_File=/etc/ssl/certs/ca-certificates.crt\n")])])]),t("p",[e._v("TLS_CA_Filesの実際の場所は、ディストリビューションに依存します。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('"/etc/ssl/certs/ca-certificates.crt",                // Debian/Ubuntu/Gentoo etc.\n"/etc/pki/tls/certs/ca-bundle.crt",                  // Fedora/RHEL 6\n"/etc/ssl/ca-bundle.pem",                            // OpenSUSE\n"/etc/pki/tls/cacert.pem",                           // OpenELEC\n"/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem", // CentOS/RHEL 7\n')])])]),t("p",[e._v("下記でも取得できます。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("curl-config --ca\n")])])]),t("p",[e._v("これで接続をテストできます：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("echo -n 'Subject: test\\n\\nTesting ssmtp' | sendmail -v some-recipient@gmail.com\n")])])]),t("h2",{attrs:{id:"カスタム環境変数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#カスタム環境変数","aria-hidden":"true"}},[e._v("#")]),e._v(" カスタム環境変数")]),e._v(" "),t("p",[e._v("ePortalプロセス用に独自の環境変数を定義できます。")]),e._v(" "),t("p",[t("code",[e._v("/usr/share/kcare-eportal/environment")]),e._v(" フォルダがあります。これは、基本的にenvdir互換のデーモンツールです。")]),e._v(" "),t("p",[e._v("例えば、デフォルトのhttps証明書検証を無効にするには、次のように "),t("code",[e._v("PYTHONHTTPSVERIFY")]),e._v(" 環境変数を "),t("code",[e._v("0")]),e._v(" に設定できます。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("echo 0 > /usr/share/kcare-eportal/environment/PYTHONHTTPSVERIFY`\n")])])])])},[],!1,null,null,null);a.default=s.exports}}]);