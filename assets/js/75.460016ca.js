(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{359:function(e,t,a){"use strict";a.r(t);var n=a(32),s=Object(n.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"upgrade"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#upgrade","aria-hidden":"true"}},[e._v("#")]),e._v(" Upgrade")]),e._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[e._v("Note")]),a("p",[e._v("How to upgrade from a ‘free patchset’ to a fully functional, paid KernelCare license")])]),a("p",[e._v("If you installed our complementary Symlink Protection patchset and now would like to take advantage of the comprehensive kernel security updates without reboots that "),a("a",{attrs:{href:"https://www.kernelcare.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("KernelCare"),a("OutboundLink")],1),e._v(" delivers, below describes how to do it.")]),e._v(" "),a("p",[e._v("Review our pricing page and purchase a license key "),a("a",{attrs:{href:"https://www.kernelcare.com/pricing/",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1),e._v(". If you already have a CLN account, you can purchase a plan by logging into "),a("a",{attrs:{href:"https://cln.cloudlinux.com/console/auth/login",target:"_blank",rel:"noopener noreferrer"}},[e._v("CLN"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("If you are using an IP-based license, nothing else is required and you are all set.")]),e._v(" "),a("p",[e._v("If you are using a key-based license, run:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ /usr/bin/kcarectl --register KEY\n")])])]),a("p",[e._v("To check if patches were applied, run:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ /usr/bin/kcarectl --info\n")])])]),a("p",[e._v("The software will automatically check for new patches every 4 hours, but if you would like to perform an update manually, run:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ /usr/bin/kcarectl --update\n")])])]),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[e._v("Note")]),a("p",[a("em",[e._v("Free")]),e._v(" patches are changed to "),a("em",[e._v("default")]),e._v(" now. If you still need symlink protection, you would need to apply "),a("em",[e._v("extra")]),e._v(" patches - they include symlink protection plus the security fixes for CentOS 6 and CentOS 7 (there are no extra charges for extra patches.")])]),a("p",[e._v("To enable extra patches and apply patch, run:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kcarectl --set-patch-type extra --update\n")])])]),a("p",[e._v("To enable extra patches without update, run:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kcarectl --set-patch-type extra\n")])])]),a("p",[e._v("The "),a("em",[e._v("extra")]),e._v(" patch will be applied on the next automatic update.")]),e._v(" "),a("p",[e._v("To see details, run:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kcarectl --patch-info\n")])])]),a("p",[e._v("You should see something similar to:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("OS: centos6\nkernel: kernel-2.6.32-696.6.3.el6\ntime: 2017-07-31 22:46:22\nuname: 2.6.32-696.6.3.el6\n \nkpatch-name: 2.6.32/symlink-protection.patch\nkpatch-description: symlink protection // If you see this patch, it means that you can enable symlink protection.\nkpatch-kernel: kernel-2.6.32-279.2.1.el6\nkpatch-cve: N/A\nkpatch-cvss: N/A\nkpatch-cve-url: N/A\nkpatch-patch-url: https://gerrit.cloudlinux.com/#/c/16508/\n \nkpatch-name: 2.6.32/symlink-protection.kpatch-1.patch\nkpatch-description: symlink protection (kpatch adaptation)\nkpatch-kernel: kernel-2.6.32-279.2.1.el6\nkpatch-cve: N/A\nkpatch-cvss: N/A\nkpatch-cve-url: N/A\nkpatch-patch-url: https://gerrit.cloudlinux.com/#/c/16508/\n \nkpatch-name: 2.6.32/ipset-fix-list-shrinking.patch\nkpatch-description: fix ipset list shrinking for no reason\nkpatch-kernel: N/A\nkpatch-cve: N/A\nkpatch-cvss:N/A\nkpatch-cve-url: N/A\nkpatch-patch-url: https://bugs.centos.org/view.php?id=13499\n")])])]),a("p",[e._v("To enable Symlink Owner Match Protection, add the following line:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Fs.enforce_symlinksifowner =1\n")])])]),a("p",[e._v("Into "),a("code",[e._v("/etc/sysconfig/kcare/sysctl.conf")]),e._v(". And run:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sysctl -w fs.enforce_symlinksifowner=1\n")])])]),a("p",[e._v("See "),a("a",{attrs:{href:"https://docs.cloudlinux.com/cloudlinux_os_kernel/#symlink-owner-match-protection",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.cloudlinux.com/cloudlinux_os_kernel/#symlink-owner-match-protection"),a("OutboundLink")],1),e._v(" for details.")])])},[],!1,null,null,null);t.default=s.exports}}]);