<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How To | Documentation</title>
    <meta name="generator" content="VuePress 1.4.1">
    <script src="https://js.hs-scripts.com/5408110.js"></script>
    <script src="/scripts/scroll-to-hash.js"></script>
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="This article explains how to disable or enable SMT (Simultaneous multithreading) without rebooting using KernelCare, to help mitigate the recent MDS/Zombieload vulnerability.">
    <meta name="image" content="https://docs.kernelcare.com/images/LicenseManagement.png">
    <meta name="twitter:title" content="How To">
    <meta name="twitter:description" content="This article explains how to disable or enable SMT (Simultaneous multithreading) without rebooting using KernelCare, to help mitigate the recent MDS/Zombieload vulnerability.">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://docs.kernelcare.com/images/LicenseManagement.png">
    <meta name="twitter:url" content="https://docs.kernelcare.com/how-to/">
    <meta property="og:type" content="article">
    <meta property="og:title" content="How To">
    <meta property="og:description" content="This article explains how to disable or enable SMT (Simultaneous multithreading) without rebooting using KernelCare, to help mitigate the recent MDS/Zombieload vulnerability.">
    <meta property="og:image" content="https://docs.kernelcare.com/images/LicenseManagement.png">
    <meta property="og:url" content="https://docs.kernelcare.com/how-to/">
    <meta property="og:site_name" content="KernelCare docs">
    <meta itemprop="name" content="How To">
    <meta itemprop="description" content="This article explains how to disable or enable SMT (Simultaneous multithreading) without rebooting using KernelCare, to help mitigate the recent MDS/Zombieload vulnerability.">
    <meta itemprop="image" content="https://docs.kernelcare.com/images/LicenseManagement.png">
    <link rel="preload" href="/assets/css/0.styles.752d992c.css" as="style"><link rel="preload" href="/assets/js/app.b51e0bc5.js" as="script"><link rel="preload" href="/assets/js/4.577097ac.js" as="script"><link rel="preload" href="/assets/js/1.ba7fb1cd.js" as="script"><link rel="preload" href="/assets/js/30.0415dedf.js" as="script"><link rel="prefetch" href="/assets/js/10.84959f90.js"><link rel="prefetch" href="/assets/js/11.ed77397d.js"><link rel="prefetch" href="/assets/js/12.1dde7a29.js"><link rel="prefetch" href="/assets/js/13.4b31310b.js"><link rel="prefetch" href="/assets/js/14.a33c1a94.js"><link rel="prefetch" href="/assets/js/15.35f71d95.js"><link rel="prefetch" href="/assets/js/16.1a309176.js"><link rel="prefetch" href="/assets/js/17.78f57500.js"><link rel="prefetch" href="/assets/js/18.7ab3e5fa.js"><link rel="prefetch" href="/assets/js/19.263724c7.js"><link rel="prefetch" href="/assets/js/20.e00ca05f.js"><link rel="prefetch" href="/assets/js/21.52632d9a.js"><link rel="prefetch" href="/assets/js/22.3f896ae5.js"><link rel="prefetch" href="/assets/js/23.40fb7847.js"><link rel="prefetch" href="/assets/js/24.bee6afe8.js"><link rel="prefetch" href="/assets/js/25.6a7470b5.js"><link rel="prefetch" href="/assets/js/26.b9a3cc04.js"><link rel="prefetch" href="/assets/js/27.ddd6adaf.js"><link rel="prefetch" href="/assets/js/28.f5dced7c.js"><link rel="prefetch" href="/assets/js/29.1d6f6656.js"><link rel="prefetch" href="/assets/js/31.2503779b.js"><link rel="prefetch" href="/assets/js/32.22cb23c4.js"><link rel="prefetch" href="/assets/js/33.7fd8e616.js"><link rel="prefetch" href="/assets/js/34.84822604.js"><link rel="prefetch" href="/assets/js/35.0f71fa2f.js"><link rel="prefetch" href="/assets/js/36.cc65a9e0.js"><link rel="prefetch" href="/assets/js/37.b19c001f.js"><link rel="prefetch" href="/assets/js/38.07e1e740.js"><link rel="prefetch" href="/assets/js/39.d0d52d8c.js"><link rel="prefetch" href="/assets/js/40.d783f949.js"><link rel="prefetch" href="/assets/js/41.0b9b0611.js"><link rel="prefetch" href="/assets/js/42.7dd5a480.js"><link rel="prefetch" href="/assets/js/43.45db91ad.js"><link rel="prefetch" href="/assets/js/44.69f12874.js"><link rel="prefetch" href="/assets/js/45.7bf00cf3.js"><link rel="prefetch" href="/assets/js/46.a64f82b3.js"><link rel="prefetch" href="/assets/js/47.b1c75a76.js"><link rel="prefetch" href="/assets/js/48.7058d4bd.js"><link rel="prefetch" href="/assets/js/49.2e4863e6.js"><link rel="prefetch" href="/assets/js/5.45d36589.js"><link rel="prefetch" href="/assets/js/50.8e60bfeb.js"><link rel="prefetch" href="/assets/js/51.bc865727.js"><link rel="prefetch" href="/assets/js/52.9cc42ab9.js"><link rel="prefetch" href="/assets/js/53.32695104.js"><link rel="prefetch" href="/assets/js/54.825e0dd9.js"><link rel="prefetch" href="/assets/js/55.f58ced37.js"><link rel="prefetch" href="/assets/js/56.eee053c5.js"><link rel="prefetch" href="/assets/js/57.9a01e92f.js"><link rel="prefetch" href="/assets/js/58.f726692c.js"><link rel="prefetch" href="/assets/js/59.ae2ea52f.js"><link rel="prefetch" href="/assets/js/6.3345a15c.js"><link rel="prefetch" href="/assets/js/60.bf58c14a.js"><link rel="prefetch" href="/assets/js/61.03a01960.js"><link rel="prefetch" href="/assets/js/62.0240160c.js"><link rel="prefetch" href="/assets/js/63.1b227a83.js"><link rel="prefetch" href="/assets/js/64.5a1e3a44.js"><link rel="prefetch" href="/assets/js/65.ef3d1ffd.js"><link rel="prefetch" href="/assets/js/66.1ad8eb2a.js"><link rel="prefetch" href="/assets/js/67.5a3c6542.js"><link rel="prefetch" href="/assets/js/68.d2c6125c.js"><link rel="prefetch" href="/assets/js/69.f4af0abe.js"><link rel="prefetch" href="/assets/js/7.b27fab08.js"><link rel="prefetch" href="/assets/js/70.7c3595d1.js"><link rel="prefetch" href="/assets/js/71.9ec65d26.js"><link rel="prefetch" href="/assets/js/72.c84d5bc2.js"><link rel="prefetch" href="/assets/js/73.c0b19a72.js"><link rel="prefetch" href="/assets/js/74.13cdb27b.js"><link rel="prefetch" href="/assets/js/75.460016ca.js"><link rel="prefetch" href="/assets/js/76.21d4b46a.js"><link rel="prefetch" href="/assets/js/77.f3a233ad.js"><link rel="prefetch" href="/assets/js/8.d351735a.js"><link rel="prefetch" href="/assets/js/9.f2a4fb37.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.c559ca7e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.752d992c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/installation/" class="home-link"><img src="/logo.svg" alt="Documentation" class="logo"> <span class="site-name site-name--documentation can-hide">Documentation</span></a> <form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <div class="links" style="max-width:nullpx;"><a href="https://cloudlinux.zendesk.com/hc/en-us/requests/new" target="_blank" class="btn">
      Submit Request
    </a> <!----> <a href="https://www.kernelcare.com/free-trial/" target="_blank" class="btn">
      Try Free
    </a> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><span class="title">Language:</span> <a class="dropdown-title"><span class="text">En</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/how-to/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/jp/how-to/" class="nav-link">日本語</a></li></ul></div></div></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><span class="title">Language:</span> <a class="dropdown-title"><span class="text">En</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/how-to/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/jp/how-to/" class="nav-link">日本語</a></li></ul></div></div></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><div class="sidebar-heading open"><span>Content</span> <!----></div> <ul class="sidebar-group-items"><li><div class="sidebar-header sidebar-link"><div><a href="/installation/" class="sidebar-link">Installation of KernelCare</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/installation/#switching-from-ksplice" class="sidebar-link">Switching from Ksplice</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/installation/#canonical-livepatch" class="sidebar-link">Canonical Livepatch</a></div></li></ul></li></ul></li><li><div class="sidebar-header sidebar-link"><div><a href="/kernelcare-plus/" class="sidebar-link">Glibc and OpenSSL patching (KernelCare+)</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-plus/#installation-and-upgrade" class="sidebar-link">Installation and upgrade</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-plus/#usage" class="sidebar-link">Usage</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-plus/#auto-update" class="sidebar-link">Auto update</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kernelcare-plus/#troubleshooting" class="sidebar-link">Troubleshooting</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kernelcare-plus/#auditd-logs" class="sidebar-link">Auditd logs</a></div></li></ul></li></ul></li><li><div><a href="/settings/" class="sidebar-link">Basic Management</a></div></li><li><div class="sidebar-header sidebar-link"><div><a href="/command-line/" class="sidebar-link">Command Line Tools</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div><a href="/command-line/#kcarectl" class="sidebar-link">kcarectl</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/command-line/#kcare-uname" class="sidebar-link">kcare-uname</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/command-line/#kernelcare-doctor" class="sidebar-link">kernelcare doctor</a></div></li></ul></li><li><div class="active collapsed sidebar-header sidebar-link"><div class="active"><a href="/how-to/" class="active sidebar-link">How To</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/how-to/#how-to-disable-hyperthreading-smt-without-reboot-kernelcare-case" class="sidebar-link">How to disable HyperThreading (SMT) without reboot: KernelCare case</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/how-to/#smt-control" class="sidebar-link">SMT Control</a></div></li><li class="sidebar-sub-header"><div><a href="/how-to/#smt-status" class="sidebar-link">SMT Status</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/how-to/#how-to-update-microcode-without-reboot-with-vendor-provided-package" class="sidebar-link">How to update Microcode without reboot with vendor-provided package</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/how-to/#updating-microcode-on-ubuntu-and-debian" class="sidebar-link">Updating microcode on Ubuntu and Debian</a></div></li><li class="sidebar-sub-header"><div><a href="/how-to/#updating-microcode-on-red-hat-and-centos" class="sidebar-link">Updating Microcode on Red Hat and CentOS</a></div></li><li class="sidebar-sub-header"><div><a href="/how-to/#updating-microcode-on-centos-6" class="sidebar-link">Updating Microcode on CentOS 6</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/how-to/#plesk-related" class="sidebar-link">Plesk related</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/how-to/#how-to-get-a-kernelcare-activation-key-from-the-extended-plesk-license" class="sidebar-link">How to get a KernelCare activation key from the extended Plesk license</a></div></li></ul></li></ul></li><li><div><a href="/config-options/" class="sidebar-link">Config Options</a></div></li><li><div><a href="/disabling-some-patches/" class="sidebar-link">Disabling Some Patches</a></div></li><li><div><a href="/delayed-feed/" class="sidebar-link">Delayed Feed</a></div></li><li><div><a href="/extra-patchset/" class="sidebar-link">Extra Patchset</a></div></li><li><div><a href="/sticky-patches/" class="sidebar-link">Sticky Patches</a></div></li><li><div class="sidebar-header sidebar-link"><div><a href="/scanner-interface/" class="sidebar-link">Scanner Interface</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div><a href="/scanner-interface/#issue-description" class="sidebar-link">Issue description</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/scanner-interface/#how-to-use" class="sidebar-link">How to use</a></div></li></ul></li><li><div class="sidebar-header sidebar-link"><div><a href="/kc-agent-monitoring/" class="sidebar-link">KC agent monitoring via CLN Portal</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div><a href="/kc-agent-monitoring/#built-in-monitoring" class="sidebar-link">Built-in monitoring</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/kc-agent-monitoring/#kernelcare-monitoring-api" class="sidebar-link">KernelCare monitoring API</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/kc-agent-monitoring/#zabbix-template" class="sidebar-link">Zabbix Template</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/kc-agent-monitoring/#datadog-integration" class="sidebar-link">Datadog Integration</a></div></li></ul></li><li><div><a href="/upgrade/" class="sidebar-link">Upgrade</a></div></li><li><div><a href="/uninstall/" class="sidebar-link">Uninstall KernelCare</a></div></li><li><div><a href="/technology/" class="sidebar-link">Technology</a></div></li><li><div class="sidebar-header sidebar-link"><div><a href="/AWS-deployment-guide/" class="sidebar-link">KernelCare on AWS – Deployment User Guide</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/AWS-deployment-guide/#introductory-material" class="sidebar-link">Introductory Material</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#introduction" class="sidebar-link">Introduction</a></div></li><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#prerequisites-and-requirements" class="sidebar-link">Prerequisites and Requirements</a></div></li><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#architecture-diagrams" class="sidebar-link">Architecture Diagrams</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/AWS-deployment-guide/#planning-guidance" class="sidebar-link">Planning Guidance</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#security" class="sidebar-link">Security</a></div></li><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#costs" class="sidebar-link">Costs</a></div></li><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#sizing" class="sidebar-link">Sizing</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/AWS-deployment-guide/#deployment-guidance" class="sidebar-link">Deployment Guidance</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#deployment-assets" class="sidebar-link">Deployment Assets</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/AWS-deployment-guide/#operational-guidance" class="sidebar-link">Operational Guidance</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#health-check" class="sidebar-link">Health Check</a></div></li><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#backup-and-recovery" class="sidebar-link">Backup and Recovery</a></div></li><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#routine-maintenance" class="sidebar-link">Routine Maintenance</a></div></li><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#emergency-maintenance" class="sidebar-link">Emergency Maintenance</a></div></li><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#patch-feed-advanced-options" class="sidebar-link">Patch Feed Advanced Options</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/AWS-deployment-guide/#support" class="sidebar-link">Support</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#support-costs" class="sidebar-link">Support Costs</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/AWS-deployment-guide/#accessibility" class="sidebar-link">Accessibility</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#reference-materials" class="sidebar-link">Reference Materials</a></div></li><li class="sidebar-sub-header"><div><a href="/AWS-deployment-guide/#localization" class="sidebar-link">Localization</a></div></li></ul></li></ul></li><li><div class="sidebar-header sidebar-link"><div><a href="/reseller-partner-ui/" class="sidebar-link">Reseller Partner UI</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div><a href="/reseller-partner-ui/#server-section" class="sidebar-link">Server Section</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/reseller-partner-ui/#billing-info-add-funds" class="sidebar-link">Billing Info/Add Funds</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/reseller-partner-ui/#api-section" class="sidebar-link">API Section</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/reseller-partner-ui/#profile" class="sidebar-link">Profile</a></div></li></ul></li><li><div class="sidebar-header sidebar-link"><div><a href="/kernelcare-enterprise/" class="sidebar-link">KernelCare Enterprise (ePortal)</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-enterprise/#eportal-hardware-requirements" class="sidebar-link">ePortal Hardware Requirements</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-enterprise/#installation" class="sidebar-link">Installation</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-enterprise/#how-to-adjust-proxy-on-eportal-machine" class="sidebar-link">How to adjust proxy on ePortal machine</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-enterprise/#managing-users" class="sidebar-link">Managing Users</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kernelcare-enterprise/#authentication-using-ldap" class="sidebar-link">Authentication using LDAP</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#configuration" class="sidebar-link">Configuration</a></div></li><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#login-process" class="sidebar-link">Login process</a></div></li><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#basic-setup-example" class="sidebar-link">Basic setup example</a></div></li><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#filter-setup-example" class="sidebar-link">Filter setup example</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-enterprise/#accessing-eportal" class="sidebar-link">Accessing ePortal</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kernelcare-enterprise/#patchset-deployment" class="sidebar-link">PatchSet Deployment</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#manage-patchset-page" class="sidebar-link">Manage patchset page</a></div></li><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#script-to-automatically-install-latest-patchsets" class="sidebar-link">Script to automatically install latest patchsets</a></div></li><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#script-to-deploy-release-from-a-file" class="sidebar-link">Script to deploy release from a file</a></div></li><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#clean-obsolete-releases" class="sidebar-link">Clean obsolete releases</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kernelcare-enterprise/#libcare-patchset-deployment" class="sidebar-link">LibCare PatchSet Deployment</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#cli-to-install-the-latest-patchsets" class="sidebar-link">CLI to install the latest patchsets</a></div></li><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#cli-to-deploy-patchset-from-archive" class="sidebar-link">CLI to deploy patchset from archive</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kernelcare-enterprise/#qemu-patchset-deployment" class="sidebar-link">QEMU PatchSet Deployment</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#cli-to-install-the-latest-patchsets-2" class="sidebar-link">CLI to install the latest patchsets</a></div></li><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#cli-to-deploy-patchset-from-archive-2" class="sidebar-link">CLI to deploy patchset from archive</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kernelcare-enterprise/#managing-keys" class="sidebar-link">Managing Keys</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#cli-to-manage-keys" class="sidebar-link">CLI to manage keys</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kernelcare-enterprise/#managing-servers" class="sidebar-link">Managing Servers</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#show-extended-check-in-statistics-in-admin-ui" class="sidebar-link">Show extended check-in statistics in admin UI</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kernelcare-enterprise/#feed-management" class="sidebar-link">Feed Management</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#cli-to-manage-feeds" class="sidebar-link">CLI to manage feeds</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-enterprise/#adding-extra-tag-field" class="sidebar-link">Adding extra Tag field</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kernelcare-enterprise/#eportal-api" class="sidebar-link">Eportal API</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#get-admin-api-servers" class="sidebar-link">GET /admin/api/servers</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-enterprise/#how-to-setup-eportal-to-use-https" class="sidebar-link">How to setup ePortal to use HTTPS</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kernelcare-enterprise/#high-availability" class="sidebar-link">High availability</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#basic-setup" class="sidebar-link">Basic setup</a></div></li><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#adding-node-to-an-existing-eportal-instance" class="sidebar-link">Adding node to an existing ePortal instance</a></div></li><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#other-replication-setups" class="sidebar-link">Other replication setups</a></div></li><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#caveats" class="sidebar-link">Caveats</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kernelcare-enterprise/#deploying-kernelcare" class="sidebar-link">Deploying KernelCare</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#kernelcare-client-config-file" class="sidebar-link">KernelCare client config file</a></div></li><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#deployment-automation" class="sidebar-link">Deployment Automation</a></div></li><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#changing-eportal-ip" class="sidebar-link">Changing ePortal IP</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-enterprise/#migrate-eportal" class="sidebar-link">Migrate ePortal</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-enterprise/#configuration-locations" class="sidebar-link">Configuration &amp; locations</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-enterprise/#stopping-starting" class="sidebar-link">Stopping &amp; Starting</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kernelcare-enterprise/#log-files" class="sidebar-link">Log Files</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#log-rotation" class="sidebar-link">Log Rotation</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-enterprise/#nagios-zabbix-support" class="sidebar-link">Nagios &amp; Zabbix support</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kernelcare-enterprise/#usage-reports" class="sidebar-link">Usage reports</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#how-to-configure-sendmail-ssmtp" class="sidebar-link">How to configure Sendmail (SSMTP)</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div><a href="/kernelcare-enterprise/#custom-environment-variables" class="sidebar-link">Custom environment variables</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kernelcare-enterprise/#authentication-using-single-sign-on" class="sidebar-link">Authentication using Single Sign On</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kernelcare-enterprise/#configuration-2" class="sidebar-link">Configuration</a></div></li></ul></li></ul></li><li><div class="sidebar-header sidebar-link"><div><a href="/kcare-nexpose/" class="sidebar-link">Kcare-nexpose (deprecated)</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kcare-nexpose/#installation" class="sidebar-link">Installation</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kcare-nexpose/#from-yum-repository" class="sidebar-link">From yum repository</a></div></li><li class="sidebar-sub-header"><div><a href="/kcare-nexpose/#from-github" class="sidebar-link">From GitHub</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/kcare-nexpose/#how-it-works" class="sidebar-link">How It Works</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/kcare-nexpose/#supported-report-types" class="sidebar-link">Supported report types</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div><a href="/kcare-nexpose/#how-to-launch" class="sidebar-link">How To Launch</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/kcare-nexpose/#yaml-config-file-description" class="sidebar-link">YAML config file description</a></div></li></ul></li><li><div class="sidebar-header sidebar-link"><div><a href="/uchecker/" class="sidebar-link">Unpatched Library Detector (UChecker)</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div><a href="/uchecker/#description" class="sidebar-link">Description</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/uchecker/#how-uchecker-works" class="sidebar-link">How UChecker works</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/uchecker/#usage" class="sidebar-link">Usage</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/uchecker/#troubleshooting" class="sidebar-link">Troubleshooting</a></div></li></ul></li><li><div><a href="/kernelcare-whmcs-plugin/" class="sidebar-link">KernelCare WHMCS Plugin</a></div></li><li><div class="sidebar-header sidebar-link"><div><a href="/proxy-settings/" class="sidebar-link">Firewall and Proxy Settings</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div><a href="/proxy-settings/#patching-servers-through-firewall" class="sidebar-link">Patching servers through firewall</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/proxy-settings/#patching-servers-through-proxy" class="sidebar-link">Patching servers through proxy</a></div></li></ul></li><li><div><a href="/eol-ubuntu-lts-kernels-support/" class="sidebar-link">EOL Ubuntu LTS kernels support</a></div></li><li><div><a href="/uefi-secure-boot/" class="sidebar-link">UEFI Secure Boot Support</a></div></li></ul></div></li></ul> </div> <div class="page"> <div class="breadcrumb-wrapper page-breadcrumb" data-v-5e0e0acf><span class="breadcrumb-title" data-v-5e0e0acf>Documentation:</span> <a href="/how-to/" class="breadcrumb router-link-exact-active router-link-active" data-v-5e0e0acf>
    How To
  </a></div> <div class="page-nav-wrapper"><div class="page-nav"><a href="/command-line/" class="nav-arrow left"></a> <a href="/config-options/" class="nav-arrow right"></a></div></div> <div class="content content__default"><h1 id="how-to"><a href="#how-to" aria-hidden="true" class="header-anchor">#</a> How To</h1> <h2 id="how-to-disable-hyperthreading-smt-without-reboot-kernelcare-case"><a href="#how-to-disable-hyperthreading-smt-without-reboot-kernelcare-case" aria-hidden="true" class="header-anchor">#</a> How to disable HyperThreading (SMT) without reboot: KernelCare case</h2> <p>This article explains how to disable or enable SMT (Simultaneous multithreading) without rebooting using KernelCare, to help mitigate the recent MDS/Zombieload vulnerability.</p> <p>Disabling CPU simultaneous multithreading (SMT) is one of the mitigations needed to counter the recent MDS vulnerability (also known as ‘Zombieload’). There is a performance impact that depends on the configuration of the hosting platform and its workload patterns. You should also consider the impact of other mitigation strategies, such as assigning dedicated cores to guests (e.g. VMs).</p> <p>You can control and get the status of SMT with the kernel’s <code>sysfs</code> interface. There are two files, both in the <code>/sys/devices/system/cpu/smt</code> directory:</p> <ul><li><code>control</code></li> <li><code>active</code></li></ul> <p>If you cannot find the <code>/sys/devices/system/cpu/smt</code> directory, this means your running kernel does not support SMT. In this case, you need to apply KernelCare patches so the SMT controls become available to your system. Use the <code>kcarectrl</code> command:</p> <div class="language- extra-class"><pre class="language-text"><code>kcarectl --update
Kernel is safe
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>ls -l /sys/devices/system/cpu/smt
-r--r--r-- 1 root root 4096 May 17 13:06 active
-rw-r--r-- 1 root root 4096 May 17 13:06 control
</code></pre></div><p>As soon as you have these files in place, it is possible to proceed with disabling SMT.</p> <iframe width="560" height="315" src="https://www.youtube.com/embed/RUGCvEO1hAE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe> <h3 id="smt-control"><a href="#smt-control" aria-hidden="true" class="header-anchor">#</a> SMT Control</h3> <p><code>/sys/devices/system/cpu/smt/control</code></p> <p>This file lets you enable or disable SMT, and shows its state. There are three values:</p> <ol><li><code>on</code>: The CPU supports SMT and it is enabled. All logical CPUs can be taken offline or online without restriction.</li> <li><code>off</code>: The CPU supports SMT but it is disabled. Only so-called primary SMT threads can be taken offline/online without restriction. Attempts to put a non-primary sibling thread online will be rejected.</li> <li><code>notsupported</code>: The CPU does not support SMT. You will not be able to write to the control file.</li></ol> <h3 id="smt-status"><a href="#smt-status" aria-hidden="true" class="header-anchor">#</a> SMT Status</h3> <p><code>/sys/devices/system/cpu/smt/active</code></p> <p>The contents of this file show the status of SMT (e.g. if two or more sibling threads are active on the same physical core the contents of this file is 1, if not: 0).</p> <p>Here are some commands to control SMT support (root permissions are required):</p> <h4 id="check-the-smt-state"><a href="#check-the-smt-state" aria-hidden="true" class="header-anchor">#</a> Check the SMT state</h4> <div class="language- extra-class"><pre class="language-text"><code>cat /sys/devices/system/cpu/smt/active
</code></pre></div><h4 id="enable-smt"><a href="#enable-smt" aria-hidden="true" class="header-anchor">#</a> Enable SMT</h4> <div class="language- extra-class"><pre class="language-text"><code>echo on &gt; /sys/devices/system/cpu/smt/control
</code></pre></div><h4 id="disable-smt"><a href="#disable-smt" aria-hidden="true" class="header-anchor">#</a> Disable SMT</h4> <div class="language- extra-class"><pre class="language-text"><code>echo off &gt; /sys/devices/system/cpu/smt/control
</code></pre></div><p>Disabling SMT, <a href="/how-to/#how-to-update-microcode-without-reboot-with-vendor-provided-package">updating microcode</a>, and applying KernelCare patches will protect your systems against the ZombieLoad vulnerability. Note, only the latter action is applicable to virtual systems (e.g. VMs, VPS and other cloud instance types).</p> <h2 id="how-to-update-microcode-without-reboot-with-vendor-provided-package"><a href="#how-to-update-microcode-without-reboot-with-vendor-provided-package" aria-hidden="true" class="header-anchor">#</a> How to update Microcode without reboot with vendor-provided package</h2> <p>This article shows how to update the microcode of Intel CPUs running Linux.</p> <div class="warning custom-block"><p class="custom-block-title">Warning</p><p>To avoid possible issues with Microcode updating, enable SMT before the update.</p></div><div class="tip custom-block"><p class="custom-block-title">Note</p><p>This article is subject to change and will be updated with instructions for other distributions.</p></div><p><strong>Contents:</strong></p> <ul><li><a href="/how-to/#updating-microcode-on-ubuntu-and-debian">Updating microcode on Ubuntu and Debian</a></li> <li><a href="/how-to/#updating-microcode-on-red-hat-and-centos">Updating microcode on Red Hat Enterprise Linux (and derivatives)</a></li> <li><a href="/how-to/#updating-microcode-on-centos-6">Updating Microcode on CentOS 6</a></li></ul> <div class="tip custom-block"><p class="custom-block-title">Notes</p><ul><li>These steps must be done as root.</li> <li>The examples shown are for Debian.</li> <li>If you have doubts your systems are fully protected against CPU- and kernel-related vulnerabilities, please <a href="mailto:sales@cloudlinux.com">get in touch with us</a>.</li></ul></div><h3 id="updating-microcode-on-ubuntu-and-debian"><a href="#updating-microcode-on-ubuntu-and-debian" aria-hidden="true" class="header-anchor">#</a> Updating microcode on Ubuntu and Debian</h3> <ol><li><p>Find the microcode package download link for your platform</p> <ul><li>Ubuntu: <a href="https://usn.ubuntu.com/3977-1/" target="_blank" rel="noopener noreferrer">https://usn.ubuntu.com/3977-1/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Debian: <a href="https://packages.debian.org/search?keywords=intel-microcode" target="_blank" rel="noopener noreferrer">https://packages.debian.org/search?keywords=intel-microcode<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li><p>Download the package</p></li></ol> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>Example shown for Debian 9</p></div><div class="language- extra-class"><pre class="language-text"><code>cd &lt;a temporary directory, e.g. /tmp&gt;
mkdir firmware
cd firmware
wget http://security.debian.org/debian-security/pool/updates/non-free/i/intel-microcode/intel-microcode_3.20190514.1~deb9u1_amd64.deb
</code></pre></div><ol start="3"><li>Check the downloaded package</li></ol> <div class="language- extra-class"><pre class="language-text"><code>md5sum intel-microcode_3.20190514.1~deb9u1_amd64.deb
c7bc9728634137453e0f4821fb6bb436  intel-microcode_3.20190514.1~deb9u1_amd64.deb
</code></pre></div><p>A list of checksums is on <a href="https://packages.debian.org/stretch/amd64/intel-microcode/download" target="_blank" rel="noopener noreferrer">the Debian packages download page<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <ol start="4"><li>Unpack the package</li></ol> <div class="language- extra-class"><pre class="language-text"><code>dpkg -x intel-microcode_3.20190514.1~deb9u1_amd64.deb
</code></pre></div><ol start="5"><li>Check the unpacked files</li></ol> <div class="language- extra-class"><pre class="language-text"><code>ls -l
total 1896
drwxr-xr-x 5 root root   53 May 15 04:18 etc
-rw-r--r-- 1 root root 1940140 May 17 11:42 intel-microcode_3.20190514.1~deb9u1_amd64.deb
drwxr-xr-x 3 root root   22 May 15 04:18 lib
drwxr-xr-x 3 root root   19 May 15 04:18 usr
</code></pre></div><ol start="6"><li>Create a backup of existing microcode:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>test -d /lib/firmware/intel-ucode/ &amp;&amp; mv /lib/firmware/intel-ucode/ /lib/firmware/intel-ucode.backup
</code></pre></div><ol start="7"><li>Copy the new microcode and check it</li></ol> <div class="language- extra-class"><pre class="language-text"><code>cp -r lib/firmware/intel-ucode/ /lib/firmware/
ls -l /lib/firmware/ | grep intel-ucode
drwxr-xr-x  2 root root 4096 May 17 11:47 intel-ucode
drwxr-xr-x  2 root root 4096 May 16 20:54 intel-ucode.backup
</code></pre></div><ol start="8"><li>Check the current microcode version</li></ol> <div class="language- extra-class"><pre class="language-text"><code>dmesg | grep microcode
[ 2.254717] microcode: sig=0x306a9, pf=0x10, revision=0x12
[ 2.254820] microcode: Microcode Update Driver: v2.01 &lt;tigran@aivazian.fsnet.co.uk&gt;, Peter Oruba
</code></pre></div><ol start="9"><li>(Optional) Double check the current microcode versions (revisions per core)</li></ol> <div class="language- extra-class"><pre class="language-text"><code>cat /proc/cpuinfo | grep -e microcode
microcode : 0x12
microcode : 0x12
microcode : 0x12
microcode : 0x12
</code></pre></div><ol start="10"><li>Check the microcode reload file exists</li></ol> <div class="language- extra-class"><pre class="language-text"><code>ls -l /sys/devices/system/cpu/microcode/reload
--w------- 1 root root 4096 May 17 11:54 /sys/devices/system/cpu/microcode/reload
</code></pre></div><ol start="11"><li>Force the kernel to load the new microcode</li></ol> <div class="language- extra-class"><pre class="language-text"><code>echo 1 &gt; /sys/devices/system/cpu/microcode/reload
</code></pre></div><ol start="12"><li>Check the new microcode</li></ol> <div class="language- extra-class"><pre class="language-text"><code>dmesg | grep microcode
[ 2.254717] microcode: sig=0x306a9, pf=0x10, revision=0x12
[ 2.254820] microcode: Microcode Update Driver: v2.01 &lt;tigran@aivazian.fsnet.co.uk&gt;, Peter Oruba
[ 1483.494573] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09
[ 1483.495985] microcode: updated to revision 0x21, date = 2019-02-13
[ 1483.496012] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09
[ 1483.496698] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09
[ 1483.497391] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09
</code></pre></div><ol start="13"><li>(Optional) Double check the new microcode version (revisions per core)</li></ol> <div class="language- extra-class"><pre class="language-text"><code>cat /proc/cpuinfo | grep -e microcode
microcode : 0x21
microcode : 0x21
microcode : 0x21
microcode : 0x21
</code></pre></div><h3 id="updating-microcode-on-red-hat-and-centos"><a href="#updating-microcode-on-red-hat-and-centos" aria-hidden="true" class="header-anchor">#</a> Updating Microcode on Red Hat and CentOS</h3> <p>For RHEL-based distributions, you can use the <code>microcode_ctl utility</code> to update microcode.</p> <ol><li>Get the latest microcode by updating the <code>microcode_ctl</code> package</li></ol> <div class="language- extra-class"><pre class="language-text"><code>yum update microcode_ctl
</code></pre></div><ol start="2"><li>Create a force file</li></ol> <p>Create a <code>force-late-intel–06–4f–01</code> inside the firmware directory.</p> <div class="language- extra-class"><pre class="language-text"><code>touch /lib/firmware/`uname -r`/force-late-intel-06-4f-01
</code></pre></div><ol start="3"><li>Run the microcode update</li></ol> <div class="language- extra-class"><pre class="language-text"><code>/usr/libexec/microcode_ctl/update_ucode
</code></pre></div><ol start="4"><li>Force the kernel to load the new microcode</li></ol> <div class="language- extra-class"><pre class="language-text"><code>echo 1 &gt; /sys/devices/system/cpu/microcode/reload
</code></pre></div><ol start="5"><li>Check the new microcode</li></ol> <div class="language- extra-class"><pre class="language-text"><code>dmesg | grep microcode
[ 2.254717] microcode: sig=0x306a9, pf=0x10, revision=0x12
[ 2.254820] microcode: Microcode Update Driver: v2.01 &lt;tigran@aivazian.fsnet.co.uk&gt;, Peter Oruba
[ 1483.494573] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09
[ 1483.495985] microcode: updated to revision 0x21, date = 2019-02-13
[ 1483.496012] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09
[ 1483.496698] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09
[ 1483.497391] platform microcode: firmware: direct-loading firmware intel-ucode/06-3a-09
</code></pre></div><ol start="6"><li>(Optional) Double check the new microcode version (revisions per core)</li></ol> <div class="language- extra-class"><pre class="language-text"><code>cat /proc/cpuinfo | grep -e microcode
microcode : 0x21
microcode : 0x21
microcode : 0x21
microcode : 0x21
</code></pre></div><h3 id="updating-microcode-on-centos-6"><a href="#updating-microcode-on-centos-6" aria-hidden="true" class="header-anchor">#</a> Updating Microcode on CentOS 6</h3> <ol><li>Get the latest microcode by updating the <code>microcode_ctl</code> package</li></ol> <div class="language- extra-class"><pre class="language-text"><code>yum update microcode_ctl
</code></pre></div><ol start="2"><li>If <code>yum update microcode_ctl</code> outputs the following:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>Package(s) microcode_ctl available, but not installed.
No Packages marked for Update
</code></pre></div><p>you need to install the package manually.</p> <ol start="3"><li>To install <code>microcode_ctl</code> package, run the command:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>yum install microcode_ctl
</code></pre></div><p>The command output:</p> <div class="language- extra-class"><pre class="language-text"><code>Installed:
  microcode_ctl.x86_64 2:1.17-33.11.el6_10                                                                                                                                 

Complete!
</code></pre></div><ol start="4"><li>Check CPU microcode version:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>cat /proc/cpuinfo | grep microcode
microcode       : 9
microcode       : 9
microcode       : 9
microcode       : 9
</code></pre></div><ol start="5"><li>Try to update microcode</li></ol> <div class="language- extra-class"><pre class="language-text"><code>microcode_ctl -u
</code></pre></div><p>If you see the output:</p> <div class="language- extra-class"><pre class="language-text"><code>microcode_ctl: writing microcode (length: 2370560)
microcode_ctl: cannot open /dev/cpu/microcode for writing errno=2 (No such file or directory)
</code></pre></div><p>You need to load driver microcode.</p> <ol start="6"><li>Load driver microcode</li></ol> <div class="language- extra-class"><pre class="language-text"><code>modprobe microcode
</code></pre></div><ol start="7"><li>Try to update microcode again:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>microcode_ctl -u
</code></pre></div><p>If you see the output:</p> <div class="language- extra-class"><pre class="language-text"><code>microcode_ctl: writing microcode (length: 2370560)
microcode_ctl: microcode successfully written to /dev/cpu/microcode
</code></pre></div><p>then update is successful.</p> <ol start="8"><li>Check version:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>cat /proc/cpuinfo | grep microcode
microcode       : 17
microcode       : 17
microcode       : 17
microcode       : 17
</code></pre></div><iframe width="560" height="315" src="https://www.youtube.com/embed/EydWy-b9uns" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe> <h2 id="plesk-related"><a href="#plesk-related" aria-hidden="true" class="header-anchor">#</a> Plesk related</h2> <h3 id="how-to-get-a-kernelcare-activation-key-from-the-extended-plesk-license"><a href="#how-to-get-a-kernelcare-activation-key-from-the-extended-plesk-license" aria-hidden="true" class="header-anchor">#</a> How to get a KernelCare activation key from the extended Plesk license</h3> <p>Often our clients purchase KernelCare licenses through Plesk/Odin and in such cases, they get a universal key which includes the KernelCare license and other additional keys for Plesk plugins. Such a key has the following syntax – <code>A00B00-0CDE00-F0G000-HIGK00-LM0N00</code>, – and initially, it is installed through Plesk automatically and the license gets activated successfully.</p> <p>However, if it is required to re-register the agent for some reason or simply get the KernelCare activation key separately, it would be impossible to apply the above-mentioned one – we would need to deal with the KernelCare service separately.</p> <p>To get the KernelCare activation key from the extended Plesk license key, you will need to proceed with the following.</p> <ol><li>Navigate to <em>Tools &amp; Settings &gt;&gt; Plesk &gt;&gt; License Management &gt;&gt; Additional License Keys</em></li></ol> <p><img src="/images/LicenseManagement.png" alt=""></p> <p><img src="/images/AdditionalLicenseKeys.png" alt=""></p> <ol start="2"><li><p>Click <em>Download key</em> next to the KernelCare license listed on the page and open the file downloaded in some text editor</p></li> <li><p>Find the following abstract:</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>&lt;!--Key body--&gt;
&lt;aps-3:key-body core:encoding=&quot;base64&quot; core:type=&quot;binary&quot;&gt;YOUR_BASE64_ENCODED_LICENSE_KEY==&lt;/aps-3:key-body&gt;
&lt;!--Information about additional key--&gt;
</code></pre></div><ol start="4"><li><p>This is your base64-encoded key, and it should be decoded using a CLI utility or an online base64 decoder into UTF-8, e.g. <a href="https://www.base64decode.org" target="_blank" rel="noopener noreferrer">https://www.base64decode.org<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
The new license key should have the following format: <code>xxxxxxxxxxxxxxxx</code>. It will contain lower and upper case letters and numbers.</p></li> <li><p>Use the new key decoded to activate the service:</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>/usr/bin/kcarectl --register DECODED_KEY_HERE
</code></pre></div><p>This is it!</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/cloudlinux/kernelcare-doc/edit/dev/docs/how-to/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="back-to-top" data-v-c64d4a1e><a class="nav-arrow top back-to-top__link" data-v-c64d4a1e></a></div> </div> <div class="footer" data-v-3ca314c6><div data-v-3ca314c6><a href="https://cloudlinux.com" data-v-3ca314c6><img src="/assets/img/we-are-cloudlinux.783ed390.svg" alt="We are Cloudlinux" data-v-3ca314c6></a></div> <div class="footer-company-title" data-v-3ca314c6>2022. CloudLinux Inc</div> <div data-v-3ca314c6><div data-v-3ca314c6><a href="https://www.kernelcare.com/how-to-install-kernelcare/" target="_blank" data-v-3ca314c6>How to</a></div><div data-v-3ca314c6><a href="https://www.kernelcare.com/faqs/" target="_blank" data-v-3ca314c6>Sales and Technical FAQs</a></div><div data-v-3ca314c6><a href="https://cloudlinux.zendesk.com/hc/en-us/requests/new" target="_blank" data-v-3ca314c6>Contact support</a></div><div data-v-3ca314c6><a href="https://blog.kernelcare.com/" target="_blank" data-v-3ca314c6>Blog</a></div></div> <div class="social" data-v-3ca314c6><span class="footer-social-text" data-v-3ca314c6></span> <a href="https://www.facebook.com/kernelcare/" target="_blank" data-v-3ca314c6><img src="/fb.png" class="footer-social-logo" data-v-3ca314c6></a><a href="https://twitter.com/kernelcare/" target="_blank" data-v-3ca314c6><img src="/tw.png" class="footer-social-logo" data-v-3ca314c6></a><a href="https://linkedin.com/company/cloudlinux" target="_blank" data-v-3ca314c6><img src="/in.png" class="footer-social-logo" data-v-3ca314c6></a><a href="https://www.youtube.com/channel/UCZ3YMHWnMP7TaxlXVay5-aw" target="_blank" data-v-3ca314c6><img src="/ytube.png" class="footer-social-logo" data-v-3ca314c6></a></div></div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b51e0bc5.js" defer></script><script src="/assets/js/4.577097ac.js" defer></script><script src="/assets/js/1.ba7fb1cd.js" defer></script><script src="/assets/js/30.0415dedf.js" defer></script>
  </body>
</html>
